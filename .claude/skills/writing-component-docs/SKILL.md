---
name: writing-component-docs
description: >
  Conventions for authoring and maintaining Prefab component and action
  documentation pages (docs/components/*.mdx, docs/actions/*.mdx). Use when
  creating new component docs, updating existing docs after API changes,
  adding examples, or editing Protocol/API Reference sections.
---

## Page Structure

Every component doc follows this section order (h2 headers for TOC):

1. **Frontmatter** — `title`, `description`, `icon`
2. **Intro paragraph** — one sentence explaining what the component does
3. **## Basic Usage** — simplest working example, no extra options
4. **## [Feature sections]** — one h2 per notable feature/variant
5. **## API Reference** — Python parameters (Card/ParamField format)
6. **## Protocol Reference** — protocol link + inline JSON schema

The page title doesn't appear in the TOC, so "Basic Usage" is the user's
entry point. Never drop straight into a preview without a heading.

## Component Previews

Only edit the Python code block inside `<ComponentPreview auto>`. The JSON
prop, CodeGroup wrapper, and Protocol tab are all generated — never write
them by hand.

After editing previews, run `prefab dev build-docs` to regenerate.

**Code block titles:** Always give the Python block a title (e.g.,
`` ```python Python ``). A block without a title produces a zero-width tab in
the CodeGroup that users can't click. The title goes before other directives:
`` ```python Python {5} ``.

**Python code style inside previews:**
- Target ~80 character line width
- Use implicit string concatenation for long text
- Wrap function arguments when they don't fit on one line
- Include all necessary imports

## API Reference

Use Card + ParamField. Lead with the most important parameters:

```mdx
<Card icon="code" title="ComponentName Parameters">
<ParamField body="param_name" type="str" default="value">
  Description of the parameter.
</ParamField>
</Card>
```

## Protocol Reference

Start with a link to the autogenerated protocol definition page(s), then
show inline JSON schema blocks.

Single type:
```
For the complete protocol schema, see the [Badge protocol definition](/protocol/badge).
```

Multiple types (Oxford comma):
```
For the complete protocol schemas, see [Card](/protocol/card), [CardHeader](/protocol/card-header), and [CardFooter](/protocol/card-footer).
```

Protocol slug is the kebab-case of the wire type name (e.g., `AreaChart` →
`area-chart`, `ForEach` → `for-each`, `RadioGroup` → `radio-group`).

Inline JSON schema conventions:
- Append `?` to optional property names
- Show default values inline for bools and enums
- Use `(required)` after the type for required props
- Use `[ChildType]` to reference other component schemas

## Content Rules

- Use Hitchhiker's Guide to the Galaxy references for placeholder content.
  Never use "Lorem ipsum" or marketing copy about the component itself.
- Do NOT add per-field "Supports interpolation" callouts. Interpolation is
  universal and documented centrally at `/patterns/interpolation`.

## Files to Keep Aligned

When the Python API or wire protocol changes, update all of these:

- `src/prefab_ui/components/<name>.py` — Python model (source of truth)
- `renderer/src/schemas/<name>.ts` — Zod schema
- `renderer/src/components/` — renderer
- `docs/components/<name>.mdx` — documentation
- `schemas/fixtures/components/<Name>.json` — test fixtures
- `skills/generative-prefab-ui/` — distributable skill for wire protocol generation
- `skills/writing-prefab-python/` — distributable skill for Python DSL usage

After any change: `prefab dev build-docs` then `uv run pytest tests/ -x`.
