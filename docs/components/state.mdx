---
title: State
description: Define named values that child components can reference with {{ }} expressions.
icon: database
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

When your components use `{{ name }}` or `{{ role }}` expressions, those values have to come from somewhere. The `State` component defines them — wrap a section of your UI and give it named values, and everything inside can reference them.

## Basic Usage

<ComponentPreview auto json={`{"view":{"type":"State","state":{"name":"Arthur Dent","role":"Reluctant Adventurer"},"children":[{"type":"Card","children":[{"type":"CardHeader","children":[{"type":"CardTitle","content":"{{ name }}"},{"type":"CardDescription","content":"{{ role }}"}]}]}]}}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import (
    Card,
    CardDescription,
    CardHeader,
    CardTitle,
    State,
)

with State(name="Arthur Dent", role="Reluctant Adventurer"):
    with Card():
        with CardHeader():
            CardTitle("{{ name }}")
            CardDescription("{{ role }}")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "type": "State",
    "state": {
      "name": "Arthur Dent",
      "role": "Reluctant Adventurer"
    },
    "children": [
      {
        "type": "Card",
        "children": [
          {
            "type": "CardHeader",
            "children": [
              {
                "type": "CardTitle",
                "content": "{{ name }}"
              },
              {
                "type": "CardDescription",
                "content": "{{ role }}"
              }
            ]
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

`State(name="Arthur Dent")` makes `{{ name }}` available to every component inside the `with` block. You can pass data as keyword arguments, or as a positional dict:

```python Equivalent Forms
# Kwargs
with State(name="Ford", role="Researcher"):
    Text("{{ name }}")

# Dict
with State({"name": "Ford", "role": "Researcher"}):
    Text("{{ name }}")
```

## State vs set_initial_state

Both define values that `{{ }}` expressions can reference, but they work differently.

**`set_initial_state()`** creates values that the user can change. Form controls bind to it, and actions like `SetState` and `ToggleState` modify it. It's global — every component in the UI sees it.

**`State`** defines fixed values scoped to a part of the tree. The user can't change them, and they only exist inside the `with State(...)` block.

Use `set_initial_state()` for anything interactive (form inputs, toggles, lists the user edits). Use `State` when you're passing server data into templates — things like names, labels, URLs, or configuration that shouldn't change.

```python When to Use Which
# Interactive — user changes this with the slider
set_initial_state(volume=75)
Slider(name="volume")

# Fixed — server data that templates reference
with State(ship="Heart of Gold", captain="Zaphod"):
    CardTitle("{{ ship }}")
    CardDescription("Captain: {{ captain }}")
```

## Nested Scopes

`State` components nest. Inner values shadow outer ones for the same key:

<ComponentPreview auto json={`{"view":{"cssClass":"gap-2","type":"Column","children":[{"type":"State","state":{"greeting":"Don't Panic","name":"Arthur"},"children":[{"type":"Text","content":"{{ greeting }}, {{ name }}"},{"type":"State","state":{"name":"Ford"},"children":[{"type":"Text","content":"{{ greeting }}, {{ name }}"}]}]}]}}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import Column, State, Text

with Column(gap=2):
    with State(greeting="Don't Panic", name="Arthur"):
        Text("{{ greeting }}, {{ name }}")
        with State(name="Ford"):
            Text("{{ greeting }}, {{ name }}")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-2",
    "type": "Column",
    "children": [
      {
        "type": "State",
        "state": {
          "greeting": "Don't Panic",
          "name": "Arthur"
        },
        "children": [
          {
            "type": "Text",
            "content": "{{ greeting }}, {{ name }}"
          },
          {
            "type": "State",
            "state": {
              "name": "Ford"
            },
            "children": [
              {
                "type": "Text",
                "content": "{{ greeting }}, {{ name }}"
              }
            ]
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

The first `Text` renders "Don't Panic, Arthur". The second renders "Don't Panic, Ford" — the inner `State` overrides `name` but inherits `greeting`.

## With ForEach

`State` works alongside [ForEach](/components/for-each) to provide values that aren't part of the iterated data:

<ComponentPreview auto json={`{"view":{"type":"State","state":{"prefix":"Speaks"},"children":[{"cssClass":"gap-2 items-center","type":"Row","children":[{"type":"ForEach","key":"languages","children":[{"type":"Badge","label":"{{ prefix }}: {{ $item }}","variant":"secondary"}]}]}]},"state":{"languages":["Python","TypeScript","Rust"]}}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import Badge, ForEach, Row, State

set_initial_state(languages=["Python", "TypeScript", "Rust"])

with State(prefix="Speaks"):
    with Row(gap=2, align="center"):
        with ForEach("languages"):
            Badge(
                "{{ prefix }}: {{ $item }}",
                variant="secondary",
            )
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "type": "State",
    "state": {
      "prefix": "Speaks"
    },
    "children": [
      {
        "cssClass": "gap-2 items-center",
        "type": "Row",
        "children": [
          {
            "type": "ForEach",
            "key": "languages",
            "children": [
              {
                "type": "Badge",
                "label": "{{ prefix }}: {{ $item }}",
                "variant": "secondary"
              }
            ]
          }
        ]
      }
    ]
  },
  "state": {
    "languages": [
      "Python",
      "TypeScript",
      "Rust"
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

Each badge combines `prefix` from the surrounding `State` with `$item` from the loop.

## API Reference

<Card icon="code" title="State Parameters">
<ParamField body="state" type="dict[str, Any]" default="{}">
  Named values for child templates. Can be passed as a positional dict or via kwargs.
</ParamField>

<ParamField body="css_class" type="str | None" default="None">
  Additional Tailwind CSS classes for the wrapper element.
</ParamField>

</Card>

## Protocol Reference

```json State
{
  "type": "State",
  "children?": "[Component]",
  "state?": "object",
  "cssClass?": "string"
}
```

For the complete protocol schema, see [State](/protocol/state).
