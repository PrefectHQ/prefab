---
title: ForEach
description: Repeat components for each item in a data list.
icon: repeat
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

`ForEach` is a control-flow component that iterates over a list in your data, rendering its children once per item. Each iteration receives the list item as the interpolation context, so `{{ field }}` placeholders resolve to that item's values.

## Basic Usage

<ComponentPreview auto json={`{"_tree":{"type":"ForEach","key":"users","children":[{"type":"Card","children":[{"type":"CardHeader","children":[{"cssClass":"items-center","type":"Row","gap":2,"children":[{"type":"CardTitle","content":"{{ name }}"},{"type":"Badge","label":"{{ role }}","variant":"secondary"}]},{"type":"CardDescription","content":"{{ email }}"}]}]}]},"users":[{"name":"Alice","role":"Admin","email":"alice@example.com"},{"name":"Bob","role":"Editor","email":"bob@example.com"},{"name":"Carol","role":"Viewer","email":"carol@example.com"}]}`}>
<CodeGroup>
```python Python
from prefab_ui.components import (
    ForEach,
    Card,
    CardHeader,
    CardTitle,
    CardDescription,
    Badge,
    Row,
)

set_data(users=[
    {"name": "Alice", "role": "Admin", "email": "alice@example.com"},
    {"name": "Bob", "role": "Editor", "email": "bob@example.com"},
    {"name": "Carol", "role": "Viewer", "email": "carol@example.com"},
])

with ForEach("users"):
    with Card():
        with CardHeader():
            with Row(gap=2, css_class="items-center"):
                CardTitle("{{ name }}")
                Badge("{{ role }}", variant="secondary")
            CardDescription("{{ email }}")
```
```json Protocol
{
  "_tree": {
    "type": "ForEach",
    "key": "users",
    "children": [
      {
        "type": "Card",
        "children": [
          {
            "type": "CardHeader",
            "children": [
              {
                "cssClass": "items-center",
                "type": "Row",
                "gap": 2,
                "children": [
                  {
                    "type": "CardTitle",
                    "content": "{{ name }}"
                  },
                  {
                    "type": "Badge",
                    "label": "{{ role }}",
                    "variant": "secondary"
                  }
                ]
              },
              {
                "type": "CardDescription",
                "content": "{{ email }}"
              }
            ]
          }
        ]
      }
    ]
  },
  "users": [
    {
      "name": "Alice",
      "role": "Admin",
      "email": "alice@example.com"
    },
    {
      "name": "Bob",
      "role": "Editor",
      "email": "bob@example.com"
    },
    {
      "name": "Carol",
      "role": "Viewer",
      "email": "carol@example.com"
    }
  ]
}
```
</CodeGroup>
</ComponentPreview>

When rendered with data like `{"users": [{"name": "Alice", ...}, ...]}`, this produces one card per user.

## How It Works

The `key` argument (passed positionally or as a keyword) names the field in the data dict that contains the list. At render time, `ForEach` iterates that list. If each item is a dict, its keys become the interpolation context for that iteration. If an item is a scalar, it's available as `{{ _item }}`.

<ComponentPreview auto json={`{"_tree":{"type":"Row","gap":2,"children":[{"type":"ForEach","key":"tags","children":[{"type":"Badge","label":"{{ _item }}","variant":"secondary"}]}]},"tags":["python","mcp","prefab-ui","async"]}`}>
<CodeGroup>
```python Python
from prefab_ui.components import (
    ForEach,
    Badge,
    Row,
)

set_data(tags=["python", "mcp", "prefab-ui", "async"])

with Row(gap=2):
    with ForEach("tags"):
        Badge("{{ _item }}", variant="secondary")
```
```json Protocol
{
  "_tree": {
    "type": "Row",
    "gap": 2,
    "children": [
      {
        "type": "ForEach",
        "key": "tags",
        "children": [
          {
            "type": "Badge",
            "label": "{{ _item }}",
            "variant": "secondary"
          }
        ]
      }
    ]
  },
  "tags": [
    "python",
    "mcp",
    "prefab-ui",
    "async"
  ]
}
```
</CodeGroup>
</ComponentPreview>

With `{"tags": ["python", "mcp", "prefab-ui", "async"]}`, this renders one badge per item.

## Nested Data

Since each item becomes the full interpolation context for that iteration, you can access nested fields with dot notation:

```python Nested Fields
from prefab_ui.components import (
    ForEach,
    Card,
    CardHeader,
    CardTitle,
    CardDescription,
)

with ForEach("projects"):
    with Card():
        with CardHeader():
            CardTitle("{{ name }}")
            CardDescription("Owner: {{ owner.name }}")
```

## API Reference

<Card icon="code" title="ForEach Parameters">
<ParamField body="key" type="str" required>
  The data field containing the list to iterate over. Can be passed as a positional argument.
</ParamField>

<ParamField body="css_class" type="str | None" default="None">
  Additional Tailwind CSS classes for the wrapper element.
</ParamField>
</Card>

## Protocol Reference

```json ForEach
{
  "type": "ForEach",
  "key": "string (required)",
  "cssClass?": "string",
  "visibleWhen?": "string",
  "children": []
}
```
