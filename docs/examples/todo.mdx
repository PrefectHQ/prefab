---
title: Todo List
description: A fully interactive todo list built with client-side state actions.
icon: square-check
mode: wide
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

Multiple todo lists with inline editing, validation, and dynamic groups — all running client-side with no server calls.

<ComponentPreview auto>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import (
    Button, Card, CardContent, CardFooter, CardHeader,
    CardTitle, Checkbox, Column, ForEach, Input, Muted,
    Row, Separator, State,
)
from prefab_ui import AppendState, PopState, SetState

set_initial_state(groups=[
    {
        "name": "Work",
        "todos": [
            {"text": "Find Magrathea", "done": False},
            {"text": "Escape Vogons", "done": False},
        ],
        "new_todo": "",
    },
    {
        "name": "Personal",
        "todos": [
            {"text": "Have lunch at Milliways", "done": True},
            {"text": "Buy towel", "done": False},
        ],
        "new_todo": "",
    },
])

with Row(gap=4, align="start"):
    with ForEach("groups"):
        with State(gi="{{ $index }}"):
            with Card(css_class="w-72"):
                with CardHeader():
                    CardTitle("{{ $item.name }}")
                with CardContent(css_class="gap-3"):
                    with Row(gap=2):
                        Input(
                            name="groups.{{ gi }}.new_todo",
                            placeholder="Add a todo...",
                        )
                        Button(
                            "Add",
                            disabled="{{ not $item.new_todo }}",
                            on_click=[
                                AppendState(
                                    "groups.{{ gi }}.todos",
                                    {
                                        "text": "{{ $item.new_todo }}",
                                        "done": False,
                                    },
                                ),
                                SetState(
                                    "groups.{{ gi }}.new_todo",
                                    "",
                                ),
                            ],
                        )
                    Separator()
                    with ForEach("groups.{{ gi }}.todos"):
                        with Row(gap=2, align="center"):
                            Checkbox(
                                name=(
                                    "groups.{{ gi }}"
                                    ".todos.{{ $index }}.done"
                                ),
                            )
                            Input(
                                name=(
                                    "groups.{{ gi }}"
                                    ".todos.{{ $index }}.text"
                                ),
                                css_class=(
                                    "border-0 shadow-none"
                                    " p-0 h-auto"
                                ),
                            )
                            Button(
                                "×",
                                variant="ghost",
                                size="sm",
                                css_class="ml-auto",
                                on_click=PopState(
                                    "groups.{{ gi }}.todos",
                                    "{{ $index }}",
                                ),
                            )
                with CardFooter():
                    Muted(
                        "{{ $item.todos | length }} items"
                    )
    with Card(
        css_class=(
            "w-72 border-dashed flex items-center"
            " justify-center min-h-[200px]"
        ),
    ):
        Button(
            "+",
            variant="ghost",
            size="lg",
            css_class="text-2xl text-muted-foreground",
            on_click=AppendState("groups", {
                "name": "New List",
                "todos": [],
                "new_todo": "",
            }),
        )
```
</CodeGroup>
</ComponentPreview>

## How It Works

The state is an array of groups, each containing a `name`, a `todos` array, and a `new_todo` input buffer. [ForEach](/components/for-each) iterates the groups, and a nested ForEach iterates each group's todos.

The tricky part is nested loops — the inner ForEach shadows `$index`, so the outer group index would be lost. The fix: `State(gi="{{ $index }}")` captures the group index before entering the inner loop, making it available as `{{ gi }}` throughout. This gives us paths like `groups.{{ gi }}.todos.{{ $index }}.done` for targeting a specific todo in a specific group.

**Inline editing** swaps `Text` for a borderless `Input` bound to `groups.{{ gi }}.todos.{{ $index }}.text`. Type directly in the list to rename items — [dot-path auto-binding](/actions/set-state#dot-paths) handles the read and write.

**Validation** uses a template expression on the Add button: `disabled="{{ not $item.new_todo }}"`. The expression evaluates to `True` when the input is empty, preventing blank todos.

**Adding a group** — the dashed card at the end appends a new group object with `AppendState("groups", {...})`. ForEach picks it up and renders a new card automatically.
