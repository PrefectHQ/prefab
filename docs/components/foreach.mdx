---
title: ForEach
description: Repeat components for each item in a data list.
icon: repeat
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

`ForEach` is a control-flow component that iterates over a list in your data, rendering its children once per item. Each iteration receives the list item as the interpolation context, so `{{ field }}` placeholders resolve to that item's values.

## Basic Usage

<ComponentPreview auto json={`{"view":{"cssClass":"gap-2","type":"Column","children":[{"type":"ForEach","key":"crew","children":[{"type":"Card","children":[{"type":"CardHeader","children":[{"cssClass":"gap-2 items-center","type":"Row","children":[{"type":"CardTitle","content":"{{ name }}"},{"type":"Badge","label":"{{ designation }}","variant":"secondary"}]},{"type":"CardDescription","content":"{{ email }}"}]}]}]}]},"crew":[{"name":"Arthur Dent","designation":"Sandwich Maker","email":"arthur@heart-of-gold.ship"},{"name":"Ford Prefect","designation":"Researcher","email":"ford@megadodo.pub"},{"name":"Trillian","designation":"Astrophysicist","email":"trillian@heart-of-gold.ship"}]}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import (
    ForEach,
    Card,
    CardHeader,
    CardTitle,
    CardDescription,
    Badge,
    Column,
    Row,
)

set_data(crew=[
    {"name": "Arthur Dent", "designation": "Sandwich Maker", "email": "arthur@heart-of-gold.ship"},
    {"name": "Ford Prefect", "designation": "Researcher", "email": "ford@megadodo.pub"},
    {"name": "Trillian", "designation": "Astrophysicist", "email": "trillian@heart-of-gold.ship"},
])

with Column(gap=2):
    with ForEach("crew"):
        with Card():
            with CardHeader():
                with Row(gap=2, align="center"):
                    CardTitle("{{ name }}")
                    Badge("{{ designation }}", variant="secondary")
                CardDescription("{{ email }}")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-2",
    "type": "Column",
    "children": [
      {
        "type": "ForEach",
        "key": "crew",
        "children": [
          {
            "type": "Card",
            "children": [
              {
                "type": "CardHeader",
                "children": [
                  {
                    "cssClass": "gap-2 items-center",
                    "type": "Row",
                    "children": [
                      {
                        "type": "CardTitle",
                        "content": "{{ name }}"
                      },
                      {
                        "type": "Badge",
                        "label": "{{ designation }}",
                        "variant": "secondary"
                      }
                    ]
                  },
                  {
                    "type": "CardDescription",
                    "content": "{{ email }}"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

When rendered with the data above, this produces one card per crew member.

## How It Works

The `key` argument (passed positionally or as a keyword) names the field in the data dict that contains the list. At render time, `ForEach` iterates that list. If each item is a dict, its keys become the interpolation context for that iteration. If an item is a scalar, it's available as `{{ _item }}`.

<ComponentPreview auto json={`{"view":{"cssClass":"gap-2","type":"Row","children":[{"type":"ForEach","key":"tags","children":[{"type":"Badge","label":"{{ _item }}","variant":"secondary"}]}]},"tags":["earth","magrathea","vogon poetry","42"]}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import (
    ForEach,
    Badge,
    Row,
)

set_data(tags=["earth", "magrathea", "vogon poetry", "42"])

with Row(gap=2):
    with ForEach("tags"):
        Badge("{{ _item }}", variant="secondary")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-2",
    "type": "Row",
    "children": [
      {
        "type": "ForEach",
        "key": "tags",
        "children": [
          {
            "type": "Badge",
            "label": "{{ _item }}",
            "variant": "secondary"
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

With `{"tags": ["earth", "magrathea", "vogon poetry", "42"]}`, this renders one badge per item.

## Item Index

Every iteration has access to `$index` — the zero-based position of the current item. Use `$index + 1` for 1-based numbering:

<ComponentPreview auto json={`{"view":{"cssClass":"gap-1","type":"Column","children":[{"type":"ForEach","key":"steps","children":[{"type":"Text","content":"{{ $index + 1 }}. {{ _item }}"}]}]},"steps":["Collect underpants","?","Profit"]}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import Column, ForEach, Text

set_data(steps=["Collect underpants", "?", "Profit"])

with Column(gap=1):
    with ForEach("steps"):
        Text("{{ $index + 1 }}. {{ _item }}")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-1",
    "type": "Column",
    "children": [
      {
        "type": "ForEach",
        "key": "steps",
        "children": [
          {
            "type": "Text",
            "content": "{{ $index + 1 }}. {{ _item }}"
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

`$index` is especially useful for actions that need to target a specific list item — `SetState("items.{{ $index }}.done", true)` updates the `done` field at the current position.

`$item` is also available as a reference to the entire current item object. For dict items, individual fields are already in scope (`{{ name }}`), but `$item` lets you pass the whole object to an action like `ToolCall("edit_user", arguments={"user": "{{ $item }}"})`.

## Nested Data

Since each item becomes the full interpolation context for that iteration, you can access nested fields with dot notation:

<ComponentPreview auto json={`{"view":{"cssClass":"gap-2","type":"Column","children":[{"type":"ForEach","key":"projects","children":[{"type":"Card","children":[{"type":"CardHeader","children":[{"type":"CardTitle","content":"{{ name }}"},{"type":"CardDescription","content":"Owner: {{ owner.name }}"}]}]}]}]},"projects":[{"name":"Heart of Gold","owner":{"name":"Zaphod Beeblebrox"}},{"name":"Hitchhiker's Guide","owner":{"name":"Ford Prefect"}}]}`}>
<CodeGroup>
```python Python icon="python"
from prefab_ui.components import (
    ForEach,
    Card,
    CardHeader,
    CardTitle,
    CardDescription,
    Column,
)

set_data(projects=[
    {"name": "Heart of Gold", "owner": {"name": "Zaphod Beeblebrox"}},
    {"name": "Hitchhiker's Guide", "owner": {"name": "Ford Prefect"}},
])

with Column(gap=2):
    with ForEach("projects"):
        with Card():
            with CardHeader():
                CardTitle("{{ name }}")
                CardDescription("Owner: {{ owner.name }}")
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-2",
    "type": "Column",
    "children": [
      {
        "type": "ForEach",
        "key": "projects",
        "children": [
          {
            "type": "Card",
            "children": [
              {
                "type": "CardHeader",
                "children": [
                  {
                    "type": "CardTitle",
                    "content": "{{ name }}"
                  },
                  {
                    "type": "CardDescription",
                    "content": "Owner: {{ owner.name }}"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

## API Reference

<Card icon="code" title="ForEach Parameters">
<ParamField body="key" type="str" required>
  The data field containing the list to iterate over. Can be passed as a positional argument.
</ParamField>

<ParamField body="css_class" type="str | None" default="None">
  Additional Tailwind CSS classes for the wrapper element.
</ParamField>
</Card>

## Protocol Reference

<Card icon="braces" title="ForEach Protocol">
<ParamField body="cssClass" type="string | null">
  CSS/Tailwind classes for styling
</ParamField>

<ParamField body="children" type="array">
</ParamField>

<ParamField body="type" type="ForEach" default="ForEach">
  Component discriminator.
</ParamField>

<ParamField body="key" type="string" required>
  Data field containing the list to iterate over
</ParamField>

</Card>
