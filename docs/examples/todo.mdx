---
title: Todo List
description: A fully interactive todo list built with client-side state actions.
icon: square-check
mode: center
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

Multiple todo lists with inline editing, validation, and dynamic groups — all running client-side with no server calls.

<ComponentPreview json={{"view":{"cssClass":"gap-6 items-start","type":"Grid","minColumnWidth":"12rem","children":[{"let":{"gi":"{{ $index }}","show_done":"{{ $item.show_done }}"},"type":"ForEach","key":"groups","children":[{"type":"Card","children":[{"type":"CardHeader","children":[{"cssClass":"gap-2 items-center","type":"Row","children":[{"cssClass":"border-0 ring-0 shadow-none p-0 h-auto font-semibold text-lg focus-visible:ring-0 focus-visible:ring-offset-0","name":"groups.{{ gi }}.name","type":"Input","inputType":"text","disabled":false,"readOnly":false,"required":false},{"cssClass":"ml-auto","type":"Button","label":"\u00d7","variant":"ghost","size":"sm","disabled":false,"onClick":{"action":"popState","key":"groups","index":"{{ gi }}"}}]}]},{"type":"CardContent","children":[{"cssClass":"gap-4","type":"Column","children":[{"cssClass":"gap-0","type":"Form","onSubmit":[{"action":"appendState","key":"groups.{{ gi }}.todos","value":{"text":"{{ $item.new_todo }}","done":false}},{"action":"setState","key":"groups.{{ gi }}.new_todo","value":""}],"children":[{"cssClass":"gap-2","type":"Row","children":[{"name":"groups.{{ gi }}.new_todo","type":"Input","inputType":"text","placeholder":"Add a todo...","disabled":false,"readOnly":false,"required":false},{"type":"Button","label":"Add","variant":"default","size":"default","disabled":"{{ not $item.new_todo }}"}]}]},{"cssClass":"gap-2","type":"Column","children":[{"type":"Condition","cases":[{"when":"{{ $item.todos | length }}","children":[{"cssClass":"my-3","type":"Separator","orientation":"horizontal"}]}]},{"type":"ForEach","key":"groups.{{ gi }}.todos","children":[{"type":"Condition","cases":[{"when":"{{ not $item.done or show_done }}","children":[{"cssClass":"gap-2 items-center","type":"Row","children":[{"name":"groups.{{ gi }}.todos.{{ $index }}.done","type":"Checkbox","checked":false,"disabled":false,"required":false},{"cssClass":"border-0 ring-0 shadow-none p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0","name":"groups.{{ gi }}.todos.{{ $index }}.text","type":"Input","inputType":"text","disabled":false,"readOnly":false,"required":false},{"cssClass":"ml-auto","type":"Button","label":"\u00d7","variant":"ghost","size":"sm","disabled":false,"onClick":{"action":"popState","key":"groups.{{ gi }}.todos","index":"{{ $index }}"}}]}]}]}]}]}]}]},{"type":"CardFooter","children":[{"cssClass":"gap-2 items-center w-full justify-between","type":"Row","children":[{"content":"{{ $item.todos | length }} items","type":"Muted"},{"cssClass":"gap-1 items-center","type":"Row","children":[{"cssClass":"h-3 w-3","name":"groups.{{ gi }}.show_done","type":"Checkbox","checked":false,"disabled":false,"required":false},{"content":"Show done","type":"Muted"}]}]}]}]}]},{"cssClass":"border-dashed p-3","type":"Card","children":[{"cssClass":"text-4xl text-muted-foreground w-full h-full min-h-48 rounded-md","type":"Button","label":"+","variant":"ghost","size":"lg","disabled":false,"onClick":{"action":"appendState","key":"groups","value":{"name":"New List","todos":[],"new_todo":"","show_done":true}}}]}]},"state":{"groups.{{ gi }}.todos.{{ $index }}.done":false,"groups.{{ gi }}.show_done":false,"groups":[{"name":"Work","todos":[{"text":"Find Magrathea","done":false},{"text":"Escape Vogons","done":false}],"new_todo":"","show_done":true},{"name":"Personal","todos":[{"text":"Have lunch at Milliways","done":true},{"text":"Buy towel","done":false}],"new_todo":"","show_done":true}]}}} playground="ZnJvbSBwcmVmYWJfdWkuYXBwIGltcG9ydCBzZXRfaW5pdGlhbF9zdGF0ZQpmcm9tIHByZWZhYl91aS5jb21wb25lbnRzIGltcG9ydCAoCiAgICBCdXR0b24sIENhcmQsIENhcmRDb250ZW50LCBDYXJkRm9vdGVyLCBDYXJkSGVhZGVyLAogICAgQ2hlY2tib3gsIENvbHVtbiwgRm9ybSwgR3JpZCwgSW5wdXQsIE11dGVkLCBSb3csIFNlcGFyYXRvciwKKQpmcm9tIHByZWZhYl91aS5jb21wb25lbnRzLmNvbnRyb2xfZmxvdyBpbXBvcnQgRm9yRWFjaCwgSWYKZnJvbSBwcmVmYWJfdWkuYWN0aW9ucyBpbXBvcnQgQXBwZW5kU3RhdGUsIFBvcFN0YXRlLCBTZXRTdGF0ZQoKIyBFYWNoIGdyb3VwIGhhcyBhIG5hbWUsIGEgbGlzdCBvZiB0b2RvcywgYW4gaW5wdXQgYnVmZmVyLCBhbmQgYSB2aXNpYmlsaXR5IGZsYWcKc2V0X2luaXRpYWxfc3RhdGUoZ3JvdXBzPVsKICAgIHsKICAgICAgICAibmFtZSI6ICJXb3JrIiwKICAgICAgICAidG9kb3MiOiBbCiAgICAgICAgICAgIHsidGV4dCI6ICJGaW5kIE1hZ3JhdGhlYSIsICJkb25lIjogRmFsc2V9LAogICAgICAgICAgICB7InRleHQiOiAiRXNjYXBlIFZvZ29ucyIsICJkb25lIjogRmFsc2V9LAogICAgICAgIF0sCiAgICAgICAgIm5ld190b2RvIjogIiIsCiAgICAgICAgInNob3dfZG9uZSI6IFRydWUsCiAgICB9LAogICAgewogICAgICAgICJuYW1lIjogIlBlcnNvbmFsIiwKICAgICAgICAidG9kb3MiOiBbCiAgICAgICAgICAgIHsidGV4dCI6ICJIYXZlIGx1bmNoIGF0IE1pbGxpd2F5cyIsICJkb25lIjogVHJ1ZX0sCiAgICAgICAgICAgIHsidGV4dCI6ICJCdXkgdG93ZWwiLCAiZG9uZSI6IEZhbHNlfSwKICAgICAgICBdLAogICAgICAgICJuZXdfdG9kbyI6ICIiLAogICAgICAgICJzaG93X2RvbmUiOiBUcnVlLAogICAgfSwKXSkKCndpdGggR3JpZChtaW5fY29sdW1uX3dpZHRoPSIxMnJlbSIsIGdhcD02LCBhbGlnbj0ic3RhcnQiKToKCiAgICAjIEl0ZXJhdGUgZ3JvdXBzOyBgbGV0YCBjYXB0dXJlcyB0aGUgZ3JvdXAgaW5kZXggYXMgYGdpYCBhbmQKICAgICMgdGhlIGdyb3VwJ3Mgc2hvd19kb25lIGZsYWcgc28gdGhleSdyZSBhdmFpbGFibGUgaW4gdGhlIGlubmVyIGxvb3AKICAgIHdpdGggRm9yRWFjaCgiZ3JvdXBzIiwgbGV0PWRpY3QoZ2k9Int7ICRpbmRleCB9fSIsIHNob3dfZG9uZT0ie3sgJGl0ZW0uc2hvd19kb25lIH19IikpOgogICAgICAgIHdpdGggQ2FyZCgpOgogICAgICAgICAgICB3aXRoIENhcmRIZWFkZXIoKToKICAgICAgICAgICAgICAgIHdpdGggUm93KGdhcD0yLCBhbGlnbj0iY2VudGVyIik6CiAgICAgICAgICAgICAgICAgICAgIyBFZGl0YWJsZSBncm91cCBuYW1lIOKAlCBib3JkZXJsZXNzIGlucHV0IHN0eWxlZCBhcyBhIHRpdGxlCiAgICAgICAgICAgICAgICAgICAgSW5wdXQoCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9Imdyb3Vwcy57eyBnaSB9fS5uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgY3NzX2NsYXNzPSJib3JkZXItMCByaW5nLTAgc2hhZG93LW5vbmUgcC0wIGgtYXV0byBmb250LXNlbWlib2xkIHRleHQtbGcgZm9jdXMtdmlzaWJsZTpyaW5nLTAgZm9jdXMtdmlzaWJsZTpyaW5nLW9mZnNldC0wIiwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgQnV0dG9uKCLDlyIsIHZhcmlhbnQ9Imdob3N0Iiwgc2l6ZT0ic20iLCBjc3NfY2xhc3M9Im1sLWF1dG8iLCBvbl9jbGljaz1Qb3BTdGF0ZSgiZ3JvdXBzIiwgInt7IGdpIH19IikpCiAgICAgICAgICAgIHdpdGggQ2FyZENvbnRlbnQoKToKICAgICAgICAgICAgICAgIHdpdGggQ29sdW1uKGdhcD00KToKICAgICAgICAgICAgICAgICAgICAjIE5ldyB0b2RvIGlucHV0ICsgYWRkIGJ1dHRvbiDigJQgRm9ybSBtYWtlcyBFbnRlciBzdWJtaXQgdG9vCiAgICAgICAgICAgICAgICAgICAgd2l0aCBGb3JtKGdhcD0wLCBvbl9zdWJtaXQ9WwogICAgICAgICAgICAgICAgICAgICAgICBBcHBlbmRTdGF0ZSgiZ3JvdXBzLnt7IGdpIH19LnRvZG9zIiwgeyJ0ZXh0IjogInt7ICRpdGVtLm5ld190b2RvIH19IiwgImRvbmUiOiBGYWxzZX0pLAogICAgICAgICAgICAgICAgICAgICAgICBTZXRTdGF0ZSgiZ3JvdXBzLnt7IGdpIH19Lm5ld190b2RvIiwgIiIpLAogICAgICAgICAgICAgICAgICAgIF0pOgogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFJvdyhnYXA9Mik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnB1dChuYW1lPSJncm91cHMue3sgZ2kgfX0ubmV3X3RvZG8iLCBwbGFjZWhvbGRlcj0iQWRkIGEgdG9kby4uLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oIkFkZCIsIGRpc2FibGVkPSJ7eyBub3QgJGl0ZW0ubmV3X3RvZG8gfX0iKQoKICAgICAgICAgICAgICAgICAgICAjIElubmVyIGxvb3Agb3ZlciB0b2RvcyDigJQgZ2kga2VlcHMgdGhlIG91dGVyIGdyb3VwIGluZGV4CiAgICAgICAgICAgICAgICAgICAgd2l0aCBDb2x1bW4oZ2FwPTIpOgogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIElmKCJ7eyAkaXRlbS50b2RvcyB8IGxlbmd0aCB9fSIpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VwYXJhdG9yKHNwYWNpbmc9MykKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBGb3JFYWNoKCJncm91cHMue3sgZ2kgfX0udG9kb3MiKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggSWYoInt7IG5vdCAkaXRlbS5kb25lIG9yIHNob3dfZG9uZSB9fSIpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggUm93KGdhcD0yLCBhbGlnbj0iY2VudGVyIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94KG5hbWU9Imdyb3Vwcy57eyBnaSB9fS50b2Rvcy57eyAkaW5kZXggfX0uZG9uZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgQm9yZGVybGVzcyBpbnB1dCBsb29rcyBsaWtlIHRleHQgYnV0IGlzIGRpcmVjdGx5IGVkaXRhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0iZ3JvdXBzLnt7IGdpIH19LnRvZG9zLnt7ICRpbmRleCB9fS50ZXh0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc19jbGFzcz0iYm9yZGVyLTAgcmluZy0wIHNoYWRvdy1ub25lIHAtMCBoLWF1dG8gZm9jdXMtdmlzaWJsZTpyaW5nLTAgZm9jdXMtdmlzaWJsZTpyaW5nLW9mZnNldC0wIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oIsOXIiwgdmFyaWFudD0iZ2hvc3QiLCBzaXplPSJzbSIsIGNzc19jbGFzcz0ibWwtYXV0byIsIG9uX2NsaWNrPVBvcFN0YXRlKCJncm91cHMue3sgZ2kgfX0udG9kb3MiLCAie3sgJGluZGV4IH19IikpCgogICAgICAgICAgICB3aXRoIENhcmRGb290ZXIoKToKICAgICAgICAgICAgICAgIHdpdGggUm93KGdhcD0yLCBhbGlnbj0iY2VudGVyIiwgY3NzX2NsYXNzPSJ3LWZ1bGwganVzdGlmeS1iZXR3ZWVuIik6CiAgICAgICAgICAgICAgICAgICAgTXV0ZWQoInt7ICRpdGVtLnRvZG9zIHwgbGVuZ3RoIH19IGl0ZW1zIikKICAgICAgICAgICAgICAgICAgICB3aXRoIFJvdyhnYXA9MSwgYWxpZ249ImNlbnRlciIpOgogICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveChuYW1lPSJncm91cHMue3sgZ2kgfX0uc2hvd19kb25lIiwgY3NzX2NsYXNzPSJoLTMgdy0zIikKICAgICAgICAgICAgICAgICAgICAgICAgTXV0ZWQoIlNob3cgZG9uZSIpCgogICAgIyBEYXNoZWQgY2FyZCB0byBhZGQgYSBuZXcgZ3JvdXAKICAgIHdpdGggQ2FyZChjc3NfY2xhc3M9ImJvcmRlci1kYXNoZWQgcC0zIik6CiAgICAgICAgQnV0dG9uKAogICAgICAgICAgICAiKyIsCiAgICAgICAgICAgIHZhcmlhbnQ9Imdob3N0IiwKICAgICAgICAgICAgc2l6ZT0ibGciLAogICAgICAgICAgICBjc3NfY2xhc3M9InRleHQtNHhsIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCB3LWZ1bGwgaC1mdWxsIG1pbi1oLTQ4IHJvdW5kZWQtbWQiLAogICAgICAgICAgICBvbl9jbGljaz1BcHBlbmRTdGF0ZSgiZ3JvdXBzIiwgeyJuYW1lIjogIk5ldyBMaXN0IiwgInRvZG9zIjogW10sICJuZXdfdG9kbyI6ICIiLCAic2hvd19kb25lIjogVHJ1ZX0pLAogICAgICAgICkK">
<CodeGroup>
```python Python icon="python" expandable
from prefab_ui.app import set_initial_state
from prefab_ui.components import (
    Button, Card, CardContent, CardFooter, CardHeader,
    Checkbox, Column, Form, Grid, Input, Muted, Row, Separator,
)
from prefab_ui.components.control_flow import ForEach, If
from prefab_ui.actions import AppendState, PopState, SetState

# Each group has a name, a list of todos, an input buffer, and a visibility flag
set_initial_state(groups=[
    {
        "name": "Work",
        "todos": [
            {"text": "Find Magrathea", "done": False},
            {"text": "Escape Vogons", "done": False},
        ],
        "new_todo": "",
        "show_done": True,
    },
    {
        "name": "Personal",
        "todos": [
            {"text": "Have lunch at Milliways", "done": True},
            {"text": "Buy towel", "done": False},
        ],
        "new_todo": "",
        "show_done": True,
    },
])

with Grid(min_column_width="12rem", gap=6, align="start"):

    # Iterate groups; `let` captures the group index as `gi` and
    # the group's show_done flag so they're available in the inner loop
    with ForEach("groups", let=dict(gi="{{ $index }}", show_done="{{ $item.show_done }}")):
        with Card():
            with CardHeader():
                with Row(gap=2, align="center"):
                    # Editable group name — borderless input styled as a title
                    Input(
                        name="groups.{{ gi }}.name",
                        css_class="border-0 ring-0 shadow-none p-0 h-auto font-semibold text-lg focus-visible:ring-0 focus-visible:ring-offset-0",
                    )
                    Button("×", variant="ghost", size="sm", css_class="ml-auto", on_click=PopState("groups", "{{ gi }}"))
            with CardContent():
                with Column(gap=4):
                    # New todo input + add button — Form makes Enter submit too
                    with Form(gap=0, on_submit=[
                        AppendState("groups.{{ gi }}.todos", {"text": "{{ $item.new_todo }}", "done": False}),
                        SetState("groups.{{ gi }}.new_todo", ""),
                    ]):
                        with Row(gap=2):
                            Input(name="groups.{{ gi }}.new_todo", placeholder="Add a todo...")
                            Button("Add", disabled="{{ not $item.new_todo }}")

                    # Inner loop over todos — gi keeps the outer group index
                    with Column(gap=2):
                        with If("{{ $item.todos | length }}"):
                            Separator(spacing=3)
                        with ForEach("groups.{{ gi }}.todos"):
                            with If("{{ not $item.done or show_done }}"):
                                with Row(gap=2, align="center"):
                                    Checkbox(name="groups.{{ gi }}.todos.{{ $index }}.done")
                                    # Borderless input looks like text but is directly editable
                                    Input(
                                        name="groups.{{ gi }}.todos.{{ $index }}.text",
                                        css_class="border-0 ring-0 shadow-none p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0",
                                    )
                                    Button("×", variant="ghost", size="sm", css_class="ml-auto", on_click=PopState("groups.{{ gi }}.todos", "{{ $index }}"))

            with CardFooter():
                with Row(gap=2, align="center", css_class="w-full justify-between"):
                    Muted("{{ $item.todos | length }} items")
                    with Row(gap=1, align="center"):
                        Checkbox(name="groups.{{ gi }}.show_done", css_class="h-3 w-3")
                        Muted("Show done")

    # Dashed card to add a new group
    with Card(css_class="border-dashed p-3"):
        Button(
            "+",
            variant="ghost",
            size="lg",
            css_class="text-4xl text-muted-foreground w-full h-full min-h-48 rounded-md",
            on_click=AppendState("groups", {"name": "New List", "todos": [], "new_todo": "", "show_done": True}),
        )
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "gap-6 items-start",
    "type": "Grid",
    "minColumnWidth": "12rem",
    "children": [
      {
        "let": {"gi": "{{ $index }}", "show_done": "{{ $item.show_done }}"},
        "type": "ForEach",
        "key": "groups",
        "children": [
          {
            "type": "Card",
            "children": [
              {
                "type": "CardHeader",
                "children": [
                  {
                    "cssClass": "gap-2 items-center",
                    "type": "Row",
                    "children": [
                      {
                        "cssClass": "border-0 ring-0 shadow-none p-0 h-auto font-semibold text-lg focus-visible:ring-0 focus-visible:ring-offset-0",
                        "name": "groups.{{ gi }}.name",
                        "type": "Input",
                        "inputType": "text",
                        "disabled": false,
                        "readOnly": false,
                        "required": false
                      },
                      {
                        "cssClass": "ml-auto",
                        "type": "Button",
                        "label": "\u00d7",
                        "variant": "ghost",
                        "size": "sm",
                        "disabled": false,
                        "onClick": {"action": "popState", "key": "groups", "index": "{{ gi }}"}
                      }
                    ]
                  }
                ]
              },
              {
                "type": "CardContent",
                "children": [
                  {
                    "cssClass": "gap-4",
                    "type": "Column",
                    "children": [
                      {
                        "cssClass": "gap-0",
                        "type": "Form",
                        "onSubmit": [
                          {
                            "action": "appendState",
                            "key": "groups.{{ gi }}.todos",
                            "value": {"text": "{{ $item.new_todo }}", "done": false}
                          },
                          {"action": "setState", "key": "groups.{{ gi }}.new_todo", "value": ""}
                        ],
                        "children": [
                          {
                            "cssClass": "gap-2",
                            "type": "Row",
                            "children": [
                              {
                                "name": "groups.{{ gi }}.new_todo",
                                "type": "Input",
                                "inputType": "text",
                                "placeholder": "Add a todo...",
                                "disabled": false,
                                "readOnly": false,
                                "required": false
                              },
                              {
                                "type": "Button",
                                "label": "Add",
                                "variant": "default",
                                "size": "default",
                                "disabled": "{{ not $item.new_todo }}"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "cssClass": "gap-2",
                        "type": "Column",
                        "children": [
                          {
                            "type": "Condition",
                            "cases": [
                              {
                                "when": "{{ $item.todos | length }}",
                                "children": [{"cssClass": "my-3", "type": "Separator", "orientation": "horizontal"}]
                              }
                            ]
                          },
                          {
                            "type": "ForEach",
                            "key": "groups.{{ gi }}.todos",
                            "children": [
                              {
                                "type": "Condition",
                                "cases": [
                                  {
                                    "when": "{{ not $item.done or show_done }}",
                                    "children": [
                                      {
                                        "cssClass": "gap-2 items-center",
                                        "type": "Row",
                                        "children": [
                                          {
                                            "name": "groups.{{ gi }}.todos.{{ $index }}.done",
                                            "type": "Checkbox",
                                            "checked": false,
                                            "disabled": false,
                                            "required": false
                                          },
                                          {
                                            "cssClass": "border-0 ring-0 shadow-none p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0",
                                            "name": "groups.{{ gi }}.todos.{{ $index }}.text",
                                            "type": "Input",
                                            "inputType": "text",
                                            "disabled": false,
                                            "readOnly": false,
                                            "required": false
                                          },
                                          {
                                            "cssClass": "ml-auto",
                                            "type": "Button",
                                            "label": "\u00d7",
                                            "variant": "ghost",
                                            "size": "sm",
                                            "disabled": false,
                                            "onClick": {"action": "popState", "key": "groups.{{ gi }}.todos", "index": "{{ $index }}"}
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "CardFooter",
                "children": [
                  {
                    "cssClass": "gap-2 items-center w-full justify-between",
                    "type": "Row",
                    "children": [
                      {"content": "{{ $item.todos | length }} items", "type": "Muted"},
                      {
                        "cssClass": "gap-1 items-center",
                        "type": "Row",
                        "children": [
                          {
                            "cssClass": "h-3 w-3",
                            "name": "groups.{{ gi }}.show_done",
                            "type": "Checkbox",
                            "checked": false,
                            "disabled": false,
                            "required": false
                          },
                          {"content": "Show done", "type": "Muted"}
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "cssClass": "border-dashed p-3",
        "type": "Card",
        "children": [
          {
            "cssClass": "text-4xl text-muted-foreground w-full h-full min-h-48 rounded-md",
            "type": "Button",
            "label": "+",
            "variant": "ghost",
            "size": "lg",
            "disabled": false,
            "onClick": {
              "action": "appendState",
              "key": "groups",
              "value": {"name": "New List", "todos": [], "new_todo": "", "show_done": true}
            }
          }
        ]
      }
    ]
  },
  "state": {
    "groups.{{ gi }}.todos.{{ $index }}.done": false,
    "groups.{{ gi }}.show_done": false,
    "groups": [
      {
        "name": "Work",
        "todos": [
          {"text": "Find Magrathea", "done": false},
          {"text": "Escape Vogons", "done": false}
        ],
        "new_todo": "",
        "show_done": true
      },
      {
        "name": "Personal",
        "todos": [
          {"text": "Have lunch at Milliways", "done": true},
          {"text": "Buy towel", "done": false}
        ],
        "new_todo": "",
        "show_done": true
      }
    ]
  }
}
```
</CodeGroup>
</ComponentPreview>

## How It Works

The state is an array of groups, each containing a `name`, a `todos` array, and a `new_todo` input buffer. [ForEach](/components/for-each) iterates the groups using `$item` to access fields, and a nested ForEach iterates each group's todos.

**Nested loops with `let`** — inside a ForEach, `$item` refers to the current item and `$index` to its position. When nesting ForEach loops, use the `let` property to capture these values before they're shadowed by the inner loop. The outer ForEach uses `let=dict(gi="{{ $index }}", show_done="{{ $item.show_done }}")` to capture the group index as `gi` and the group's visibility flag as `show_done`. Inside the inner todo loop, `$index` and `$item` still refer to the todo, but `gi` and `show_done` remain available. This gives us paths like `groups.{{ gi }}.todos.{{ $index }}.done` for targeting a specific todo in a specific group.

**Inline editing** — instead of showing todo text as a `Text` component, each item uses a borderless `Input` styled with `border-0 shadow-none p-0` so it looks like plain text but is directly editable. [Dot-path auto-binding](/actions/set-state#dot-paths) handles the read and write — the input's `name` points at the exact item in state (`groups.{{ gi }}.todos.{{ $index }}.text`).

**Disabling the Add button** — `disabled="{{ not $item.new_todo }}"` evaluates to true when the input is empty, so the button stays disabled until you type something. Inside the outer ForEach, `$item` is the current group, so `$item.new_todo` accesses the group's input buffer.

**Hiding completed items** — each group has a `show_done` flag toggled by a small checkbox in the footer. The `let` binding captured it as `show_done` in the outer loop, making it available inside the inner todo loop where each todo row is wrapped in `If("{{ not $item.done or show_done }}")`. Here `$item` is the todo (due to being in the inner ForEach), and `show_done` is the captured group visibility flag.

**Adding a group** — the dashed card at the end appends a new group object with `AppendState("groups", {...})`. ForEach picks it up and renders a new card automatically.
