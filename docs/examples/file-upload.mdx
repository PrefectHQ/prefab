---
title: File Upload
description: Upload files and inspect their metadata — all client-side.
icon: cloud-arrow-up
mode: center
---

import { ComponentPreview } from '/snippets/component-preview.mdx'

MCP servers typically receive files only through the LLM conversation — every byte burns tokens and inflates latency. File upload components let users send files directly to your backend tools via `CallTool`, keeping binary data out of the context window entirely. This example stays fully client-side to demonstrate the UI mechanics, but in practice you'd wire the DropZone's `on_change` (or a button's `on_click`) to a `CallTool` that sends the base64 payload to your server for processing.

<ComponentPreview json={{"view":{"cssClass":"w-full max-w-2xl","type":"Card","children":[{"type":"CardHeader","children":[{"cssClass":"gap-2 items-center","type":"Row","children":[{"content":"File Inbox","type":"H3"},{"type":"Condition","cases":[{"when":"{{ files | length }}","children":[{"type":"Badge","label":"{{ files | length }}","variant":"secondary"}]}]}]}]},{"type":"CardContent","children":[{"cssClass":"gap-4","type":"Column","children":[{"name":"files","type":"DropZone","icon":"inbox","label":"Drop files here","description":"Don't worry, files aren't actually uploaded","multiple":true,"maxSize":10000000,"disabled":false},{"type":"Condition","cases":[{"when":"{{ files | length }}","children":[{"cssClass":"gap-2","type":"Column","children":[{"type":"ForEach","key":"files","children":[{"cssClass":"gap-3 items-center","type":"Row","children":[{"cssClass":"gap-0","type":"Column","children":[{"content":"{{ $item.name }}","type":"Small"},{"content":"{{ $item.type }} \u00b7 {{ $item.size }} bytes","type":"Muted"}]},{"cssClass":"ml-auto h-6 w-6 p-0 text-muted-foreground","type":"Button","label":"\u00d7","variant":"ghost","size":"sm","disabled":false,"onClick":{"action":"popState","key":"files","index":"{{ $index }}"}}]}]}]}]}]}]}]},{"type":"CardFooter","children":[{"cssClass":"items-center w-full","type":"Row","children":[{"type":"Condition","cases":[{"when":"{{ files | length }}","children":[{"content":"{{ files | length }} {{ files | length | pluralize:'file' }}","type":"Muted"}]}],"else":[{"content":"No files uploaded","type":"Muted"}]},{"type":"Condition","cases":[{"when":"{{ files | length }}","children":[{"cssClass":"ml-auto","type":"Button","label":"Clear all","variant":"outline","size":"sm","disabled":false,"onClick":{"action":"setState","key":"files","value":[]}}]}]}]}]}]},"state":{"files":[]}}} playground="ZnJvbSBwcmVmYWJfdWkuYXBwIGltcG9ydCBzZXRfaW5pdGlhbF9zdGF0ZQpmcm9tIHByZWZhYl91aS5jb21wb25lbnRzIGltcG9ydCAoCiAgICBCYWRnZSwgQnV0dG9uLCBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEZvb3RlciwKICAgIENhcmRIZWFkZXIsIENhcmRUaXRsZSwgQ29sdW1uLCBEcm9wWm9uZSwKICAgIEgzLCBNdXRlZCwgUm93LCBTZXBhcmF0b3IsIFNtYWxsLAopCmZyb20gcHJlZmFiX3VpLmNvbXBvbmVudHMuY29udHJvbF9mbG93IGltcG9ydCBFbHNlLCBGb3JFYWNoLCBJZgpmcm9tIHByZWZhYl91aS5hY3Rpb25zIGltcG9ydCBQb3BTdGF0ZSwgU2V0U3RhdGUKCnNldF9pbml0aWFsX3N0YXRlKGZpbGVzPVtdKQoKd2l0aCBDYXJkKGNzc19jbGFzcz0idy1mdWxsIG1heC13LTJ4bCIpIGFzIHZpZXc6CiAgICB3aXRoIENhcmRIZWFkZXIoKToKICAgICAgICB3aXRoIFJvdyhnYXA9MiwgYWxpZ249ImNlbnRlciIpOgogICAgICAgICAgICBIMygiRmlsZSBJbmJveCIpCiAgICAgICAgICAgIHdpdGggSWYoInt7IGZpbGVzIHwgbGVuZ3RoIH19Iik6CiAgICAgICAgICAgICAgICBCYWRnZSgKICAgICAgICAgICAgICAgICAgICAie3sgZmlsZXMgfCBsZW5ndGggfX0iLAogICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9InNlY29uZGFyeSIsCiAgICAgICAgICAgICAgICApCgogICAgd2l0aCBDYXJkQ29udGVudCgpOgogICAgICAgIHdpdGggQ29sdW1uKGdhcD00KToKICAgICAgICAgICAgRHJvcFpvbmUoCiAgICAgICAgICAgICAgICBpY29uPSJpbmJveCIsCiAgICAgICAgICAgICAgICBsYWJlbD0iRHJvcCBmaWxlcyBoZXJlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPSJEb24ndCB3b3JyeSwgZmlsZXMgYXJlbid0IGFjdHVhbGx5IHVwbG9hZGVkIiwKICAgICAgICAgICAgICAgIG11bHRpcGxlPVRydWUsCiAgICAgICAgICAgICAgICBtYXhfc2l6ZT0xMF8wMDBfMDAwLAogICAgICAgICAgICAgICAgbmFtZT0iZmlsZXMiLAogICAgICAgICAgICApCgogICAgICAgICAgICB3aXRoIElmKCJ7eyBmaWxlcyB8IGxlbmd0aCB9fSIpOgogICAgICAgICAgICAgICAgd2l0aCBDb2x1bW4oZ2FwPTIpOgogICAgICAgICAgICAgICAgICAgIHdpdGggRm9yRWFjaCgiZmlsZXMiKToKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBSb3coZ2FwPTMsIGFsaWduPSJjZW50ZXIiKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggQ29sdW1uKGdhcD0wKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbWFsbCgie3sgJGl0ZW0ubmFtZSB9fSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXV0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ7eyAkaXRlbS50eXBlIH19IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIMK3IHt7ICRpdGVtLnNpemUgfX0gYnl0ZXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLDlyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0iZ2hvc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9InNtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NfY2xhc3M9KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWwtYXV0byBoLTYgdy02IHAtMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiB0ZXh0LW11dGVkLWZvcmVncm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbl9jbGljaz1Qb3BTdGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImZpbGVzIiwgInt7ICRpbmRleCB9fSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgIHdpdGggQ2FyZEZvb3RlcigpOgogICAgICAgIHdpdGggUm93KGFsaWduPSJjZW50ZXIiLCBjc3NfY2xhc3M9InctZnVsbCIpOgogICAgICAgICAgICB3aXRoIElmKCJ7eyBmaWxlcyB8IGxlbmd0aCB9fSIpOgogICAgICAgICAgICAgICAgTXV0ZWQoCiAgICAgICAgICAgICAgICAgICAgInt7IGZpbGVzIHwgbGVuZ3RoIH19IgogICAgICAgICAgICAgICAgICAgICIge3sgZmlsZXMgfCBsZW5ndGggfCBwbHVyYWxpemU6J2ZpbGUnIH19IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB3aXRoIEVsc2UoKToKICAgICAgICAgICAgICAgIE11dGVkKCJObyBmaWxlcyB1cGxvYWRlZCIpCiAgICAgICAgICAgIHdpdGggSWYoInt7IGZpbGVzIHwgbGVuZ3RoIH19Iik6CiAgICAgICAgICAgICAgICBCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgIkNsZWFyIGFsbCIsCiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0ib3V0bGluZSIsCiAgICAgICAgICAgICAgICAgICAgc2l6ZT0ic20iLAogICAgICAgICAgICAgICAgICAgIGNzc19jbGFzcz0ibWwtYXV0byIsCiAgICAgICAgICAgICAgICAgICAgb25fY2xpY2s9U2V0U3RhdGUoImZpbGVzIiwgW10pLAogICAgICAgICAgICAgICAgKQo=">
<CodeGroup>
```python Python expandable icon="python"
from prefab_ui.app import set_initial_state
from prefab_ui.components import (
    Badge, Button, Card, CardContent, CardFooter,
    CardHeader, CardTitle, Column, DropZone,
    H3, Muted, Row, Separator, Small,
)
from prefab_ui.components.control_flow import Else, ForEach, If
from prefab_ui.actions import PopState, SetState

set_initial_state(files=[])

with Card(css_class="w-full max-w-2xl") as view:
    with CardHeader():
        with Row(gap=2, align="center"):
            H3("File Inbox")
            with If("{{ files | length }}"):
                Badge(
                    "{{ files | length }}",
                    variant="secondary",
                )

    with CardContent():
        with Column(gap=4):
            DropZone(
                icon="inbox",
                label="Drop files here",
                description="Don't worry, files aren't actually uploaded",
                multiple=True,
                max_size=10_000_000,
                name="files",
            )

            with If("{{ files | length }}"):
                with Column(gap=2):
                    with ForEach("files"):
                        with Row(gap=3, align="center"):
                            with Column(gap=0):
                                Small("{{ $item.name }}")
                                Muted(
                                    "{{ $item.type }}"
                                    " · {{ $item.size }} bytes"
                                )
                            Button(
                                "×",
                                variant="ghost",
                                size="sm",
                                css_class=(
                                    "ml-auto h-6 w-6 p-0"
                                    " text-muted-foreground"
                                ),
                                on_click=PopState(
                                    "files", "{{ $index }}"
                                ),
                            )

    with CardFooter():
        with Row(align="center", css_class="w-full"):
            with If("{{ files | length }}"):
                Muted(
                    "{{ files | length }}"
                    " {{ files | length | pluralize:'file' }}"
                )
            with Else():
                Muted("No files uploaded")
            with If("{{ files | length }}"):
                Button(
                    "Clear all",
                    variant="outline",
                    size="sm",
                    css_class="ml-auto",
                    on_click=SetState("files", []),
                )
```
```json Protocol icon="brackets-curly"
{
  "view": {
    "cssClass": "w-full max-w-2xl",
    "type": "Card",
    "children": [
      {
        "type": "CardHeader",
        "children": [
          {
            "cssClass": "gap-2 items-center",
            "type": "Row",
            "children": [
              {"content": "File Inbox", "type": "H3"},
              {
                "type": "Condition",
                "cases": [
                  {
                    "when": "{{ files | length }}",
                    "children": [{"type": "Badge", "label": "{{ files | length }}", "variant": "secondary"}]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "CardContent",
        "children": [
          {
            "cssClass": "gap-4",
            "type": "Column",
            "children": [
              {
                "name": "files",
                "type": "DropZone",
                "icon": "inbox",
                "label": "Drop files here",
                "description": "Don't worry, files aren't actually uploaded",
                "multiple": true,
                "maxSize": 10000000,
                "disabled": false
              },
              {
                "type": "Condition",
                "cases": [
                  {
                    "when": "{{ files | length }}",
                    "children": [
                      {
                        "cssClass": "gap-2",
                        "type": "Column",
                        "children": [
                          {
                            "type": "ForEach",
                            "key": "files",
                            "children": [
                              {
                                "cssClass": "gap-3 items-center",
                                "type": "Row",
                                "children": [
                                  {
                                    "cssClass": "gap-0",
                                    "type": "Column",
                                    "children": [
                                      {"content": "{{ $item.name }}", "type": "Small"},
                                      {"content": "{{ $item.type }} \u00b7 {{ $item.size }} bytes", "type": "Muted"}
                                    ]
                                  },
                                  {
                                    "cssClass": "ml-auto h-6 w-6 p-0 text-muted-foreground",
                                    "type": "Button",
                                    "label": "\u00d7",
                                    "variant": "ghost",
                                    "size": "sm",
                                    "disabled": false,
                                    "onClick": {"action": "popState", "key": "files", "index": "{{ $index }}"}
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "CardFooter",
        "children": [
          {
            "cssClass": "items-center w-full",
            "type": "Row",
            "children": [
              {
                "type": "Condition",
                "cases": [
                  {
                    "when": "{{ files | length }}",
                    "children": [
                      {
                        "content": "{{ files | length }} {{ files | length | pluralize:'file' }}",
                        "type": "Muted"
                      }
                    ]
                  }
                ],
                "else": [{"content": "No files uploaded", "type": "Muted"}]
              },
              {
                "type": "Condition",
                "cases": [
                  {
                    "when": "{{ files | length }}",
                    "children": [
                      {
                        "cssClass": "ml-auto",
                        "type": "Button",
                        "label": "Clear all",
                        "variant": "outline",
                        "size": "sm",
                        "disabled": false,
                        "onClick": {"action": "setState", "key": "files", "value": []}
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "state": {"files": []}
}
```
</CodeGroup>
</ComponentPreview>
